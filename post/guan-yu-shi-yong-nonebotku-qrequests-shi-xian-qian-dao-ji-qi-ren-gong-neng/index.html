<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å…³äºä½¿ç”¨nonebot+é…·Q+requestså®ç°ç­¾åˆ°æœºå™¨äººåŠŸèƒ½ | Liu, Jian&#39;s Blog</title>
<link rel="shortcut icon" href="https://JianLiu-Blog.github.io/favicon.ico?v=1735805148679">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://JianLiu-Blog.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="å…³äºä½¿ç”¨nonebot+é…·Q+requestså®ç°ç­¾åˆ°æœºå™¨äººåŠŸèƒ½ | Liu, Jian&#39;s Blog - Atom Feed" href="https://JianLiu-Blog.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="
ğŸ˜€ç–«æƒ…æœŸé—´å­¦æ ¡è¦æ±‚æ‰“å¡ï¼Œæœ¬æ¥åªç”¨ç­¾åˆ°ä¸€ä¸ªï¼Œæ…¢æ…¢çš„æˆäº†ä¸¤ä¸ªã€‚ä¸ºäº†ä¸æµªè´¹æ—¶é—´ï¼Œäºæ˜¯åœ¨å°ä¼™ä¼´ç¾¤é‡Œå†™äº†ä¸ªç­¾åˆ°è„šæœ¬å¹¶æŒ‚åœ¨nonebotæœºå™¨äººä¸Šï¼Œå€Ÿæ­¤åˆ†äº«ä¸€ä¸‹


è½¯ä»¶å‡†å¤‡
æ‰‹æœºæŠ“åŒ…è½¯ä»¶ï¼šStream
PCï¼šé…·Qæœºå™¨äºº
å¼€å‘ç¯å¢ƒ
Python 3...." />
    <meta name="keywords" content="çˆ¬è™«è„šæœ¬" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://JianLiu-Blog.github.io">
  <img class="avatar" src="https://JianLiu-Blog.github.io/images/avatar.png?v=1735805148679" alt="">
  </a>
  <h1 class="site-title">
    Liu, Jian&#39;s Blog
  </h1>
  <p class="site-description">
    
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/Liujian1997" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
        <a href="https://www.zhihu.com/people/san-sheng-15-30" target="_blank">
          <i class="ri-zhihu-line"></i>
        </a>
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              å…³äºä½¿ç”¨nonebot+é…·Q+requestså®ç°ç­¾åˆ°æœºå™¨äººåŠŸèƒ½
            </h2>
            <div class="post-info">
              <span>
                2020-04-01
              </span>
              <span>
                3 min read
              </span>
              
                <a href="https://JianLiu-Blog.github.io/tag/Ox5e0X77q/" class="post-tag">
                  # çˆ¬è™«è„šæœ¬
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://JianLiu-Blog.github.io/post-images/guan-yu-shi-yong-nonebotku-qrequests-shi-xian-qian-dao-ji-qi-ren-gong-neng.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>ğŸ˜€ç–«æƒ…æœŸé—´å­¦æ ¡è¦æ±‚æ‰“å¡ï¼Œæœ¬æ¥åªç”¨ç­¾åˆ°ä¸€ä¸ªï¼Œæ…¢æ…¢çš„æˆäº†ä¸¤ä¸ªã€‚ä¸ºäº†ä¸æµªè´¹æ—¶é—´ï¼Œäºæ˜¯åœ¨å°ä¼™ä¼´ç¾¤é‡Œå†™äº†ä¸ªç­¾åˆ°è„šæœ¬å¹¶æŒ‚åœ¨nonebotæœºå™¨äººä¸Šï¼Œå€Ÿæ­¤åˆ†äº«ä¸€ä¸‹</p>
</blockquote>
<!-- more -->
<h2 id="è½¯ä»¶å‡†å¤‡">è½¯ä»¶å‡†å¤‡</h2>
<p>æ‰‹æœºæŠ“åŒ…è½¯ä»¶ï¼šStream<br>
PCï¼šé…·Qæœºå™¨äºº</p>
<h2 id="å¼€å‘ç¯å¢ƒ">å¼€å‘ç¯å¢ƒ</h2>
<p>Python 3.6</p>
<h2 id="ä½¿ç”¨æ¡†æ¶">ä½¿ç”¨æ¡†æ¶</h2>
<p>nonebotã€requestsï¼ˆå…·ä½“ä¸åœ¨èµ˜è¿°ï¼Œpipç›´æ¥å®‰è£…å°±å¯ä»¥ï¼‰</p>
<h2 id="ç­¾åˆ°å®ç°æ€è·¯">ç­¾åˆ°å®ç°æ€è·¯</h2>
<ol>
<li>ç¬¬ä¸€æ­¥<br>
æŒ‰ç…§æˆ‘çš„æƒ³æ³•ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªPostæäº¤æ•°æ®çš„è¿‡ç¨‹ï¼Œåªéœ€è¦ç”¨requestsåº“ä¸­çš„Postæ–¹æ³•æäº¤å³å¯ã€‚</li>
<li>ç¬¬äºŒæ­¥<br>
æˆ‘åœ¨ç”µè„‘ç™»é™†æ‰“å¡çš„ç½‘ç«™ï¼Œå‘ç°ä¸èƒ½è®¿é—®ï¼Œç„¶åæˆ‘å†ç”¨æ‰‹æœºè®¿é—®ï¼Œå‘ç°å¯ä»¥æ­£å¸¸è®¿é—®ã€‚äºæ˜¯ï¼Œæˆ‘çŒœæµ‹æ˜¯æ ¹æ®è¯·æ±‚å¤´æµè§ˆå™¨çš„ä¸åŒæ¥é™å®šã€‚</li>
<li>ç¬¬ä¸‰æ­¥<br>
<img src="https://JianLiu-Blog.github.io/post-images/1585702674282.png" alt="" loading="lazy"><br>
æˆ‘ä½¿ç”¨Streamæ‰¾åˆ°æˆ‘æ‰‹æœºæµè§ˆå™¨çš„User-Agenté€šè¿‡requestsçš„getæ–¹æ³•ï¼ŒæˆåŠŸè®¿é—®ã€‚</li>
<li>ç¬¬å››æ­¥<br>
ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰ç­¾åˆ°è¿‡çš„è´¦å·ï¼ŒStreamå¼€å¯æŠ“åŒ…ï¼Œç„¶åè¿›è¡Œç­¾åˆ°ï¼Œåœ¨æ•°æ®åŒ…ä¸­ä¼˜å…ˆæŸ¥çœ‹Postæ–¹æ³•ã€‚æœ€ç»ˆæ‰¾åˆ°æäº¤çš„æ•°æ®<br>
<img src="https://JianLiu-Blog.github.io/post-images/1585703066515.png" alt="" loading="lazy"><br>
æŸ¥çœ‹æ•°æ®æ ¼å¼åæäº¤å³å¯</li>
</ol>
<pre><code class="language-python">re = requests.post(submit_url,json=json,headers=my_header)
re.encoding=re.apparent_encoding
print(re.text)
</code></pre>
<p>ç™»é™†æŸ¥çœ‹å‘ç°æˆåŠŸç­¾åˆ°</p>
<h2 id="noneboté…·qæ„å»ºæœºå™¨äºº">nonebot+é…·Qæ„å»ºæœºå™¨äºº</h2>
<blockquote>
<p>è‡³æ­¤æ ¸å¿ƒåŠŸèƒ½å·²ç»å®ç°ï¼Œä¸ºäº†æ–¹ä¾¿å°ä¼™ä¼´æ‰€ä»¥ä½¿ç”¨nonebotæ¡†æ¶é…åˆé…·Qå®ç°ç­¾åˆ°æŒ‡ä»¤</p>
</blockquote>
<ol>
<li>ç®€å•ä»‹ç»<br>
NoneBot æ˜¯ä¸€ä¸ªåŸºäº é…· Q çš„ Python å¼‚æ­¥ QQ æœºå™¨äººæ¡†æ¶ï¼Œå®ƒä¼šå¯¹ QQ æœºå™¨äººæ”¶åˆ°çš„æ¶ˆæ¯è¿›è¡Œè§£æå’Œå¤„ç†ï¼Œå¹¶ä»¥æ’ä»¶åŒ–çš„å½¢å¼ï¼Œåˆ†å‘ç»™æ¶ˆæ¯æ‰€å¯¹åº”çš„å‘½ä»¤å¤„ç†å™¨å’Œè‡ªç„¶è¯­è¨€å¤„ç†å™¨ï¼Œæ¥å®Œæˆå…·ä½“çš„åŠŸèƒ½ã€‚<br>
é™¤äº†èµ·åˆ°è§£ææ¶ˆæ¯çš„ä½œç”¨ï¼ŒNoneBot è¿˜ä¸ºæ’ä»¶æä¾›äº†å¤§é‡å®ç”¨çš„é¢„è®¾æ“ä½œå’Œæƒé™æ§åˆ¶æœºåˆ¶ï¼Œå°¤å…¶å¯¹äºå‘½ä»¤å¤„ç†å™¨ï¼Œå®ƒæ›´æ˜¯æä¾›äº†å®Œå–„ä¸”æ˜“ç”¨çš„ä¼šè¯æœºåˆ¶å’Œå†…éƒ¨è°ƒç”¨æœºåˆ¶ï¼Œä»¥åˆ†åˆ«é€‚åº”å‘½ä»¤çš„è¿ç»­äº¤äº’å’Œæ’ä»¶å†…éƒ¨åŠŸèƒ½å¤ç”¨ç­‰éœ€æ±‚ã€‚<br>
NoneBot åœ¨å…¶åº•å±‚ä¸é…· Q äº¤äº’çš„éƒ¨åˆ†ä½¿ç”¨ python-aiocqhttp åº“ï¼Œåè€…æ˜¯ CoolQ HTTP API æ’ä»¶ çš„ä¸€ä¸ª Python å¼‚æ­¥ SDKï¼Œåœ¨ Quart çš„åŸºç¡€ä¸Šå°è£…äº†ä¸ CoolQ HTTP API æ’ä»¶çš„ç½‘ç»œäº¤äº’ã€‚</li>
<li>å…·ä½“å®ç°<br>
<a href="https://cqp.cc/t/23253">é…·Qä¸‹è½½åœ°å€</a></li>
</ol>
<p><img src="https://JianLiu-Blog.github.io/post-images/1585703768721.png" alt="" loading="lazy"><br>
æ‰“å¼€CQA.exeï¼Œç™»é™†ä¹‹åå°±å¯ä»¥äº†ã€‚<br>
ç„¶åæˆ‘ä»¬å¼€å§‹ä¸‹è½½HTTP API æ’ä»¶<br>
<a href="https://github.com/richardchien/coolq-http-api/releasesx">HTTPAPIæ’ä»¶ä¸‹è½½åœ°å€</a><br>
ä¸‹è½½å®Œä¹‹åæˆ‘ä»¬æŠŠæ–‡ä»¶ç›´æ¥æ”¾åˆ°é…·qçš„æ’ä»¶ç›®å½•<br>
<img src="https://JianLiu-Blog.github.io/post-images/1585703931226.png" alt="" loading="lazy"><br>
rç„¶åå³é”®é…·qçš„å›¾æ ‡ï¼Œé€‰æ‹©åº”ç”¨ç®¡ç†ï¼Œå¯åŠ¨CQ HTTP<br>
<img src="https://JianLiu-Blog.github.io/post-images/1585704024966.png" alt="" loading="lazy"><br>
å¯åŠ¨åè¿›å…¥é…·Q çš„ data/app/io.github.richardchien.coolqhttpapi/config/ ç›®å½•ï¼Œæœ‰ä¸€ä¸ª.json çš„æ–‡ä»¶ï¼Œuser-idä¸ºåˆšåˆšç™»é™†çš„QQå·ã€‚ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„å¦‚ä¸‹é…ç½®<br>
<img src="https://JianLiu-Blog.github.io/post-images/1585704119015.png" alt="" loading="lazy"><br>
å…³äºå¦‚ä½•ä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£å·²ç»è¯´çš„å¾ˆè¯¦ç»†äº† <a href="https://nonebot.cqp.moe/guide/">nonebotè¯´æ˜æ–‡æ¡£ç‚¹è¿™é‡Œ</a><br>
ä»£ç ï¼š<a href="https://github.com/Liujian1997/Auto-login">https://github.com/Liujian1997/Auto-login</a></p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%BD%AF%E4%BB%B6%E5%87%86%E5%A4%87">è½¯ä»¶å‡†å¤‡</a></li>
<li><a href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">å¼€å‘ç¯å¢ƒ</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%A1%86%E6%9E%B6">ä½¿ç”¨æ¡†æ¶</a></li>
<li><a href="#%E7%AD%BE%E5%88%B0%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF">ç­¾åˆ°å®ç°æ€è·¯</a></li>
<li><a href="#nonebot%E9%85%B7q%E6%9E%84%E5%BB%BA%E6%9C%BA%E5%99%A8%E4%BA%BA">nonebot+é…·Qæ„å»ºæœºå™¨äºº</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://JianLiu-Blog.github.io/post/markdown-chang-yong-yu-fa/">
              <h3 class="post-title">
                Markdownå¸¸ç”¨è¯­æ³•
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'Ov23lievf4UqLaA6mF0J',
    clientSecret: 'a60d18f86b03bc0ad091687048712bd358b9be68',
    repo: 'JianLiu-Blog.github.io',
    owner: 'JianLiu-Blog',
    // admin: ['Liujian1997'],
    admin: [ 'Liujian1997', 'JianLiu-Blog'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    // id: 'Demo',
    // id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    proxy:"https://proxy-gitalk-api.netlify.app/github_access_token"
  })

  gitalk.render('gitalk-container')

</script>

<!-- <script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'e46f6dec7c07145c652c',
    clientSecret: 'd1a0b627f9b76d21bd3080d1777d0aa0ad55dd83',
    accessToken: '6a2f4d91a1f188a2089e70c2a7b63628f3e9e664',
    repo: 'gitalk',
    owner: 'gitalk',
    admin: ['booxood', 'mamboer'],
    id: 'Demo',
    distractionFreeMode: true
  });
  gitalk.render('gitalk-container');
</script> -->

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://JianLiu-Blog.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
